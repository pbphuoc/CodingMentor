package day8;

public class MainDay8 {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		double input = 2500000;
		double myResult = getSquareRoot(input);
		double exactResult = Math.sqrt(input);
		System.out.println("My SquareRoot result is: " + myResult);
		System.out.println("Exact result is: " + exactResult);
		// myResult - 0.01 <= Math.sqrt <= myResult + 0.01
		System.out.println("Is my result correct: " + (myResult - exactResult <= 0.01 && exactResult - myResult <= 0.01));
	}

	public static double getSquareRoot(double input) {
		
		double upperLimit = input;
		double lowerLimit = 0;
		if(input < 1) {
			upperLimit = 1;
			lowerLimit = input;
		}
		else if (input == 0 || input == 1)
			return input;
		while (true) {
			/*
			 * when N = m^2 > 1
			 * 0 1 2 .. m .. m^2
			 * if we keep calculating mid point = (upper + lower) / 2 and keep updating new upper or new lower by comparing to m, 
			 * every time we calculate mid point the size N will be reduced by 2:
			 * 1st time: N/1
			 * 2nd time: N/2
			 * 3rd time: N/4
			 * ..		 N/m
			 * 
			 * so the total step to divide the from size N to approximately 1 is log2(N) + 1
			 * after that the range is now slightly differently in lower < m < upper, so it will take some constant times to find the exact middle number
			 * => total time complexity log2(N)
			 */
			double middle = getMiddleNumber(upperLimit, lowerLimit);
			System.out.println("Lower: " + lowerLimit + " - Middle: " + middle + " - Upper: " + upperLimit);
			if ((int) middle * (int) middle == input)
				return (int) middle;

			if (isCorrectSqrtNum(middle, input) == 0)
				return middle;

			if (isCorrectSqrtNum(middle, input) == -1)
				lowerLimit = middle;
			else
				upperLimit = middle;
		}
	}

	public static int isCorrectSqrtNum(double sqrtNumber, double number) {
		// (a-0.01)^2 = a^2 - 0.02a + 0.0001 <= number <= a^2 + 0.02a + 0.001 = (a+0.01)^2
		if ((sqrtNumber * sqrtNumber) <= (number + 0.02 * sqrtNumber - 0.0001)
				&& (number - 0.02 * sqrtNumber - 0.0001) <= sqrtNumber * sqrtNumber) {
			return 0;
		} else if (sqrtNumber * sqrtNumber < number)
			return -1;
		else
			return 1;
	}

	public static double getMiddleNumber(double upperLimit, double lowerLimit) {
		return (upperLimit + lowerLimit) / 2;
	}
	
	public static int romanToInt(String s) {
		int index = 0;
		int number = 0;
		while (index < s.length()) {
			switch (s.charAt(index)) {
			case 'M':
				number += 1000;
				++index;
				break;
			case 'D':
				number += 500;
				++index;
				break;
			case 'C':
				if (index + 1 < s.length()) {
					switch (s.charAt(index + 1)) {
					case 'M':
						number += 900;
						++index;
						break;
					case 'D':
						number += 400;
						++index;
						break;
					default:
						number += 100;
						break;
					}
				}
				++index;
				break;
			case 'L':
				number += 50;
				++index;
				break;
			case 'X':
				if (index + 1 < s.length()) {
					switch (s.charAt(index + 1)) {
					case 'C':
						number += 90;
						++index;
						break;
					case 'L':
						number += 40;
						++index;
						break;
					default:
						number += 10;
						break;
					}
				}
				++index;
				break;
			case 'V':
				number += 5;
				++index;
				break;
			case 'I':
				if (index + 1 < s.length()) {
					switch (s.charAt(index + 1)) {
					case 'X':
						number += 9;
						++index;
						break;
					case 'V':
						number += 4;
						++index;
						break;
					default:
						number += 1;
						break;
					}
				}
				++index;
				break;
			default:
				break;
			}
		}
		return number;
	}

}
